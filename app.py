import streamlit as st

# -------------------- 설정 --------------------
st.set_page_config(page_title="내 동네 문화 큐레이터", layout="wide")

# -------------------- 타이틀 --------------------
st.title("🎭 내 동네 문화 큐레이터")
st.markdown("당신의 지역과 취향을 반영한 맞춤 공연을 추천해드려요.")

# -------------------- 사이드바 입력 --------------------
st.sidebar.header("🎯 추천 조건을 선택하세요")

# 1. 지역 선택
region = st.sidebar.selectbox(
    "지역을 선택하세요",
    ["서울", "부산", "대구", "인천", "광주", "대전", "울산", "세종", "경기", "강원", "충북", "충남", "전북", "전남", "경북", "경남", "제주"]
)

# 2. 장르 선택 (체크박스)
genres = st.sidebar.multiselect(
    "선호하는 공연 장르를 선택하세요",
    ["뮤지컬", "연극", "클래식", "국악", "가수 공연", "학생 공연", "악기 공연", "댄스 공연", "기타"]
)

# -------------------- 가짜 공연 데이터 --------------------
mock_data = [
    {"공연명": "창작 뮤지컬 <청춘>", "지역": "서울", "장르": "뮤지컬", "날짜": "2025-07-15", "장소": "홍익아트홀"},
    {"공연명": "전통 국악 공연", "지역": "전북", "장르": "국악", "날짜": "2025-08-01", "장소": "전주한옥마을"},
    {"공연명": "K-POP 콘서트", "지역": "부산", "장르": "가수 공연", "날짜": "2025-07-20", "장소": "벡스코"},
    {"공연명": "클래식 오케스트라", "지역": "서울", "장르": "클래식", "날짜": "2025-07-18", "장소": "예술의전당"},
    {"공연명": "학생 창작 댄스 무대", "지역": "광주", "장르": "댄스 공연", "날짜": "2025-07-22", "장소": "광주문화센터"},
]

# -------------------- 조건에 맞는 공연 필터링 --------------------
if genres:
    filtered = [p for p in mock_data if p["지역"] == region and p["장르"] in genres]
else:
    filtered = []

# -------------------- 출력 --------------------
st.subheader("📌 추천 공연 리스트")

if not genres:
    st.info("왼쪽에서 지역과 선호 장르를 선택해주세요.")
elif not filtered:
    st.warning("해당 조건에 맞는 공연이 아직 없습니다. 다른 조건을 선택해보세요!")
else:
    for show in filtered:
        st.markdown(f"""
        ### 🎫 {show['공연명']}
        - 📍 장소: {show['장소']}
        - 🗓️ 날짜: {show['날짜']}
        - 🎵 장르: {show['장르']}
        """)

